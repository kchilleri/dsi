<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>utils API documentation</title>
<meta name="description" content="© 2023. Triad National Security, LLC. All rights reserved.
This program was produced under U.S. Government contract 89233218CNA000001 for Los Alamos
…" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>utils</code></h1>
</header>
<section id="section-intro">
<p>© 2023. Triad National Security, LLC. All rights reserved.
This program was produced under U.S. Government contract 89233218CNA000001 for Los Alamos
National Laboratory (LANL), which is operated by Triad National Security, LLC for the U.S.
Department of Energy/National Nuclear Security Administration. All rights in the program are
reserved by Triad National Security, LLC, and the U.S. Department of Energy/National Nuclear
Security Administration. The Government is granted for itself and others acting on its behalf a
nonexclusive, paid-up, irrevocable worldwide license in this material to reproduce, prepare
derivative works, distribute copies to the public, perform publicly and display publicly, and to permit
others to do so.</p>
<p><strong>dsi.utils</strong> are sets of generic helper functions used throughout the dsi module.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
© 2023. Triad National Security, LLC. All rights reserved.
This program was produced under U.S. Government contract 89233218CNA000001 for Los Alamos
National Laboratory (LANL), which is operated by Triad National Security, LLC for the U.S.
Department of Energy/National Nuclear Security Administration. All rights in the program are
reserved by Triad National Security, LLC, and the U.S. Department of Energy/National Nuclear
Security Administration. The Government is granted for itself and others acting on its behalf a
nonexclusive, paid-up, irrevocable worldwide license in this material to reproduce, prepare
derivative works, distribute copies to the public, perform publicly and display publicly, and to permit
others to do so.

**dsi.utils** are sets of generic helper functions used throughout the dsi module.
&#34;&#34;&#34;

import os
import stat
import time
import datetime

def dircrawl(filepath):
  &#34;&#34;&#34;
  Crawls the root &#39;filepath&#39; directory and returns files

  `filepath`: source filepath to be crawled

  `return`: returns crawled file-list
  &#34;&#34;&#34;
  file_list = []
  for root, dirs, files in os.walk(filepath):
    #if os.path.basename(filepath) != &#39;tmp&#39;: # Lets skip some files
    #    continue

    for f in files: # Appent root-level files
      file_list.append(os.path.join(root, f))
    for d in dirs: # Recursively dive into directories
      sub_list = dircrawl(os.path.join(root, d))
      for sf in sub_list:
        file_list.append(sf)
    
    return file_list

def epochToDate(time):
    &#34;&#34;&#34;
    Converts epoch to date

    `time`: unix epoch time

    `return`: returns a human-readable string date
    &#34;&#34;&#34;
    ymd = time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;, time.localtime(time))
    return ymd

def posixToDate(time):
    &#34;&#34;&#34;
    Converts posix stamp to date

    `time`: posix time value

    `return`: returns a human-readable string date
    &#34;&#34;&#34;
    ymd = datetime.datetime.fromtimestamp(time, tz=datetime.timezone.utc)
    return ymd

def dateToPosix(yr,mth,day,hr,min):
    &#34;&#34;&#34;
    Converts date into posix stamp
    &#34;&#34;&#34;
    # assigned regular string date
    posixstamp = datetime.datetime(yr,mth,day,hr,min)
    return time.mktime(posixstamp.timetuple())

def isgroupreadable(filepath):
  &#34;&#34;&#34;
  Returns group file permissions

  `filepath`: text filepath to file

  `return`: boolean of the file&#39;s group read state
  &#34;&#34;&#34;
  st = os.stat(filepath)
  #print(st)
  print(st.st_mode)
  return bool(st.st_mode &amp; stat.S_IRGRP)

def printpermissions(filepath):
  &#34;&#34;&#34;
  Checks and prints os.stat file permissions

  `filepath`: text filepath to file

  `return`: none
  &#34;&#34;&#34;
  st = os.stat(filepath)
  #owner
  print( bool(st.st_mode &amp; stat.S_IRUSR) )
  print( bool(st.st_mode &amp; stat.S_IWUSR) )
  print( bool(st.st_mode &amp; stat.S_IXUSR) )
  #group
  print( bool(st.st_mode &amp; stat.S_IRGRP) )
  print( bool(st.st_mode &amp; stat.S_IWGRP) )
  print( bool(st.st_mode &amp; stat.S_IXGRP) )
  #others
  print( bool(st.st_mode &amp; stat.S_IROTH) )
  print( bool(st.st_mode &amp; stat.S_IWOTH) )
  print( bool(st.st_mode &amp; stat.S_IXOTH) )

def check_type(text):
  &#34;&#34;&#34;
  Tests input text and returns a predicted compatible SQL Type

  `text`: text string

  `return`: string description of a SQL data type
  &#34;&#34;&#34;
  try:
    value = int(text)
    return &#34; INT&#34;
  except ValueError:
      try:
          value = float(text)
          return &#34; FLOAT&#34;
      except ValueError:
          return &#34; VARCHAR&#34;</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="utils.check_type"><code class="name flex">
<span>def <span class="ident">check_type</span></span>(<span>text)</span>
</code></dt>
<dd>
<div class="desc"><p>Tests input text and returns a predicted compatible SQL Type</p>
<p><code>text</code>: text string</p>
<p><code>return</code>: string description of a SQL data type</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_type(text):
  &#34;&#34;&#34;
  Tests input text and returns a predicted compatible SQL Type

  `text`: text string

  `return`: string description of a SQL data type
  &#34;&#34;&#34;
  try:
    value = int(text)
    return &#34; INT&#34;
  except ValueError:
      try:
          value = float(text)
          return &#34; FLOAT&#34;
      except ValueError:
          return &#34; VARCHAR&#34;</code></pre>
</details>
</dd>
<dt id="utils.dateToPosix"><code class="name flex">
<span>def <span class="ident">dateToPosix</span></span>(<span>yr, mth, day, hr, min)</span>
</code></dt>
<dd>
<div class="desc"><p>Converts date into posix stamp</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dateToPosix(yr,mth,day,hr,min):
    &#34;&#34;&#34;
    Converts date into posix stamp
    &#34;&#34;&#34;
    # assigned regular string date
    posixstamp = datetime.datetime(yr,mth,day,hr,min)
    return time.mktime(posixstamp.timetuple())</code></pre>
</details>
</dd>
<dt id="utils.dircrawl"><code class="name flex">
<span>def <span class="ident">dircrawl</span></span>(<span>filepath)</span>
</code></dt>
<dd>
<div class="desc"><p>Crawls the root 'filepath' directory and returns files</p>
<p><code>filepath</code>: source filepath to be crawled</p>
<p><code>return</code>: returns crawled file-list</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dircrawl(filepath):
  &#34;&#34;&#34;
  Crawls the root &#39;filepath&#39; directory and returns files

  `filepath`: source filepath to be crawled

  `return`: returns crawled file-list
  &#34;&#34;&#34;
  file_list = []
  for root, dirs, files in os.walk(filepath):
    #if os.path.basename(filepath) != &#39;tmp&#39;: # Lets skip some files
    #    continue

    for f in files: # Appent root-level files
      file_list.append(os.path.join(root, f))
    for d in dirs: # Recursively dive into directories
      sub_list = dircrawl(os.path.join(root, d))
      for sf in sub_list:
        file_list.append(sf)
    
    return file_list</code></pre>
</details>
</dd>
<dt id="utils.epochToDate"><code class="name flex">
<span>def <span class="ident">epochToDate</span></span>(<span>time)</span>
</code></dt>
<dd>
<div class="desc"><p>Converts epoch to date</p>
<p><code>time</code>: unix epoch time</p>
<p><code>return</code>: returns a human-readable string date</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def epochToDate(time):
    &#34;&#34;&#34;
    Converts epoch to date

    `time`: unix epoch time

    `return`: returns a human-readable string date
    &#34;&#34;&#34;
    ymd = time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;, time.localtime(time))
    return ymd</code></pre>
</details>
</dd>
<dt id="utils.isgroupreadable"><code class="name flex">
<span>def <span class="ident">isgroupreadable</span></span>(<span>filepath)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns group file permissions</p>
<p><code>filepath</code>: text filepath to file</p>
<p><code>return</code>: boolean of the file's group read state</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def isgroupreadable(filepath):
  &#34;&#34;&#34;
  Returns group file permissions

  `filepath`: text filepath to file

  `return`: boolean of the file&#39;s group read state
  &#34;&#34;&#34;
  st = os.stat(filepath)
  #print(st)
  print(st.st_mode)
  return bool(st.st_mode &amp; stat.S_IRGRP)</code></pre>
</details>
</dd>
<dt id="utils.posixToDate"><code class="name flex">
<span>def <span class="ident">posixToDate</span></span>(<span>time)</span>
</code></dt>
<dd>
<div class="desc"><p>Converts posix stamp to date</p>
<p><code>time</code>: posix time value</p>
<p><code>return</code>: returns a human-readable string date</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def posixToDate(time):
    &#34;&#34;&#34;
    Converts posix stamp to date

    `time`: posix time value

    `return`: returns a human-readable string date
    &#34;&#34;&#34;
    ymd = datetime.datetime.fromtimestamp(time, tz=datetime.timezone.utc)
    return ymd</code></pre>
</details>
</dd>
<dt id="utils.printpermissions"><code class="name flex">
<span>def <span class="ident">printpermissions</span></span>(<span>filepath)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks and prints os.stat file permissions</p>
<p><code>filepath</code>: text filepath to file</p>
<p><code>return</code>: none</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def printpermissions(filepath):
  &#34;&#34;&#34;
  Checks and prints os.stat file permissions

  `filepath`: text filepath to file

  `return`: none
  &#34;&#34;&#34;
  st = os.stat(filepath)
  #owner
  print( bool(st.st_mode &amp; stat.S_IRUSR) )
  print( bool(st.st_mode &amp; stat.S_IWUSR) )
  print( bool(st.st_mode &amp; stat.S_IXUSR) )
  #group
  print( bool(st.st_mode &amp; stat.S_IRGRP) )
  print( bool(st.st_mode &amp; stat.S_IWGRP) )
  print( bool(st.st_mode &amp; stat.S_IXGRP) )
  #others
  print( bool(st.st_mode &amp; stat.S_IROTH) )
  print( bool(st.st_mode &amp; stat.S_IWOTH) )
  print( bool(st.st_mode &amp; stat.S_IXOTH) )</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="utils.check_type" href="#utils.check_type">check_type</a></code></li>
<li><code><a title="utils.dateToPosix" href="#utils.dateToPosix">dateToPosix</a></code></li>
<li><code><a title="utils.dircrawl" href="#utils.dircrawl">dircrawl</a></code></li>
<li><code><a title="utils.epochToDate" href="#utils.epochToDate">epochToDate</a></code></li>
<li><code><a title="utils.isgroupreadable" href="#utils.isgroupreadable">isgroupreadable</a></code></li>
<li><code><a title="utils.posixToDate" href="#utils.posixToDate">posixToDate</a></code></li>
<li><code><a title="utils.printpermissions" href="#utils.printpermissions">printpermissions</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>